parameters:
    level: 5
    paths:
        - app
        - config
        - database
        - routes
        - tests
    
    # Laravel specific configurations
    bootstrapFiles:
        - vendor/autoload.php
    
    # Ignore common Laravel patterns and env() casting issues
    ignoreErrors:
        - '#Cannot cast mixed to (string|int)\.#'
        - '#Binary operation "\." between .* and .* results in an error\.#'
        - '#Cannot call method forgetCachedPermissions\(\) on mixed\.#'
        - '#Call to an undefined static method Spatie\\Permission\\Models\\Permission::firstOrCreate\(\)\.#'
        - '#Call to an undefined static method Spatie\\Permission\\Models\\Role::firstOrCreate\(\)\.#'
        - '#Call to an undefined static method Spatie\\Permission\\Models\\Role::count\(\)\.#'
        - '#Call to an undefined static method Spatie\\Permission\\Models\\Permission::count\(\)\.#'
        - '#Call to an undefined method .*::assignRole\(\)\.#'
        - '#Call to an undefined method .*::hasRole\(\)\.#'
        - '#Call to an undefined method .*::can\(\)\.#'
        - '#Method Spatie\\Permission\\Contracts\\Role::hasPermissionTo\(\) invoked with 1 parameter, 2 required\.#'
        - '#Call to an undefined static method App\\Models\\User::firstOrCreate\(\)\.#'
        - '#Call to an undefined static method App\\Models\\User::where\(\)\.#'
        - '#Call to an undefined method .*::givePermissionTo\(\)\.#'
        - '#Call to an undefined method .*::hasPermissionTo\(\)\.#'
        - '#Call to an undefined method .*::getAllPermissions\(\)\.#'
        - '#Parameter .* of method .*::actingAs\(\) expects .*Authenticatable.*given\.#'
        - '#Call to an undefined method Illuminate\\Contracts\\Auth\\Factory::id\(\)\.#'
        - '#Call to an undefined method Illuminate\\Contracts\\Auth\\Factory::user\(\)\.#'
        - '#Access to an undefined property App\\Models\\User::\$id\.#'
        - '#Anonymous function should return Illuminate\\Database\\Eloquent\\Builder but returns Illuminate\\Database\\Query\\Builder\.#'
        - '#Call to an undefined static method Spatie\\Permission\\Models\\Role::where\(\)\.#'
        - '#Call to an undefined static method App\\Models\\User::count\(\)\.#'
        - '#Call to an undefined static method App\\Models\\User::role\(\)\.#'

    
    # Exclude generated files and vendor
    excludePaths:
        - vendor
        - node_modules (?)
        - storage
        - bootstrap/cache
        - *.blade.php
        - database/migrations/2025_08_02_131418_create_permission_tables.php
    
    # Additional rules for better analysis
    checkNullables: true
    checkThisOnly: false
    checkUnionTypes: true
    checkExplicitMixed: true
    checkFunctionNameCase: true